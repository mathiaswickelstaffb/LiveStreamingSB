<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Events Plugin</title>
    <style>
        /* --- CSS STYLING (Siemens Branding) --- */
        :root {
            /* Siemens Brand Colors */
            --siemens-blue: #00183B;
            --siemens-cyan: #00FFB9;
            --siemens-white: #FFFFFF;
            --siemens-gray-bg: #F3F5F7;
            
            /* Semantic Mappings */
            --sb-primary: var(--siemens-blue);
            --sb-accent: var(--siemens-cyan);
            --sb-text: var(--siemens-blue);
            --sb-bg: var(--siemens-gray-bg);
            --sb-card-bg: #FFFFFF;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--sb-bg);
            color: var(--sb-text);
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Utility Classes */
        .hidden { display: none !important; }
        
        /* --- WIDGET HEADER (SAP Concur Style) --- */
        .widget-header {
            background-color: var(--sb-primary);
            color: var(--siemens-white);
            padding: 20px 24px 0 24px;
            margin-bottom: 24px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .header-top {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 4px;
        }

        .header-icon {
            background-color: var(--sb-accent);
            color: var(--sb-primary);
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .header-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin: 0;
            letter-spacing: 0.5px;
        }

        .header-subtitle {
            font-size: 0.9rem;
            color: rgba(255,255,255,0.7);
            margin-bottom: 20px;
            margin-left: 44px; /* Align with title */
        }

        .header-stats {
            display: flex;
            gap: 40px;
            padding-bottom: 20px;
            margin-left: 44px;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
        }

        .stat-value {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--sb-accent);
        }

        .stat-label {
            font-size: 0.75rem;
            color: rgba(255,255,255,0.8);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-top: 4px;
        }

        .header-accent-line {
            height: 4px;
            background: linear-gradient(90deg, var(--sb-accent) 25%, transparent 25%);
            background-size: 100% 100%;
            width: 100%;
            border-radius: 4px 4px 0 0;
            margin-top: 8px;
        }

        /* --- CONTENT CONTAINER --- */
        .content-container {
            padding: 0 16px 24px 16px;
        }

        /* --- LIST VIEW --- */
        .event-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        @media (min-width: 768px) {
            .event-list {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
                gap: 24px;
            }
            .content-container {
                padding: 0 24px 24px 24px;
            }
        }

        .event-card {
            background: var(--sb-card-bg);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,24,59,0.08);
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
            display: flex;
            flex-direction: column;
            height: 100%;
            border: 1px solid rgba(0,24,59,0.05);
        }

        .event-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,24,59,0.12);
        }

        .card-thumbnail {
            height: 160px;
            background-color: #eee;
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .live-badge {
            position: absolute;
            top: 12px;
            left: 12px;
            background-color: var(--sb-accent);
            color: var(--sb-primary);
            font-size: 0.75rem;
            font-weight: 800;
            padding: 4px 10px;
            border-radius: 12px;
            text-transform: uppercase;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            z-index: 2;
        }

        .upcoming-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            background-color: rgba(0, 24, 59, 0.8);
            color: white;
            font-size: 0.75rem;
            font-weight: 600;
            padding: 4px 10px;
            border-radius: 12px;
            backdrop-filter: blur(4px);
        }

        .card-content {
            padding: 16px;
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }

        .event-date {
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 6px;
            font-weight: 500;
            text-transform: uppercase;
        }

        .event-title {
            font-size: 1.1rem;
            font-weight: 700;
            margin: 0 0 8px 0;
            color: var(--sb-primary);
            line-height: 1.3;
        }

        .event-desc {
            font-size: 0.9rem;
            color: #444;
            line-height: 1.5;
            flex-grow: 1;
        }
        
        .card-footer {
            padding: 12px 16px;
            border-top: 1px solid #eee;
            background-color: #fafafa;
            display: flex;
            justify-content: flex-end;
        }
        
        .open-btn {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--sb-primary);
            text-decoration: none;
            display: flex;
            align-items: center;
        }
        .open-btn::after { content: "→"; margin-left: 4px; transition: margin-left 0.2s; }
        .event-card:hover .open-btn::after { margin-left: 8px; }

        /* --- DETAIL VIEW (CUSTOM PLAYER UI) --- */
        .detail-wrapper {
            padding: 16px;
            max-width: 1000px;
            margin: 0 auto;
        }
        
        /* Custom Player Container */
        .custom-player-container {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
            background-color: #000;
            border-radius: 4px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            margin-bottom: 24px;
        }

        /* Background Image (Solar Panel) */
        .player-background {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0.9;
        }
        
        /* Gradient Overlay for Text Readability */
        .player-gradient {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, rgba(0,24,59,0.2) 0%, rgba(0,24,59,0) 50%, rgba(0,9,30,0.95) 100%);
        }

        /* Top Left Logo Box */
        .player-logo-box {
            position: absolute;
            top: 24px;
            left: 24px;
            width: 40px;
            height: 40px;
            background-color: var(--siemens-cyan);
            color: var(--siemens-white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        /* Top Right Download Icon */
        .player-download-icon {
            position: absolute;
            top: 24px;
            right: 24px;
            color: white;
            cursor: pointer;
            width: 28px;
            height: 28px;
        }

        /* Bottom Left Text (Above Controls) */
        .player-text-overlay {
            position: absolute;
            bottom: 80px; /* Above control bar */
            left: 24px;
            color: white;
            z-index: 10;
        }
        .player-brand-name { font-size: 1.25rem; font-weight: 700; display: block; letter-spacing: 0.5px; }
        .player-sub-name { font-size: 1.25rem; font-weight: 300; opacity: 0.9; }

        /* Control Bar */
        .player-controls {
            position: absolute;
            bottom: 24px;
            left: 24px;
            right: 24px;
            height: 48px;
            background-color: rgba(0, 9, 30, 0.95); /* Deep Navy/Black */
            display: flex;
            align-items: center;
            padding: 0 16px;
            border-radius: 4px;
        }

        .control-btn { background: none; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; padding: 0; margin-right: 16px; }
        .control-btn svg { fill: white; width: 20px; height: 20px; }
        .control-btn:hover svg { fill: var(--siemens-cyan); }

        .progress-track {
            flex-grow: 1;
            height: 4px;
            background-color: rgba(255,255,255,0.2);
            border-radius: 2px;
            margin: 0 16px;
            position: relative;
            cursor: pointer;
        }
        .progress-fill {
            width: 35%;
            height: 100%;
            background-color: var(--siemens-cyan);
            border-radius: 2px;
        }

        .time-display {
            color: white;
            font-size: 0.9rem;
            font-weight: 500;
            margin-right: 16px;
        }
        
        .right-controls { display: flex; gap: 12px; align-items: center; }

        /* Detail Text Area */
        .detail-info {
            background: var(--sb-card-bg);
            border-radius: 8px;
            padding: 24px;
            box-shadow: 0 4px 12px rgba(0,24,59,0.1);
        }

        .detail-title { margin: 0 0 8px 0; font-size: 1.6rem; color: var(--sb-primary); }
        .detail-meta { color: #666; font-size: 0.95rem; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 1px solid #eee; }
        .back-btn { background: none; border: none; color: var(--sb-primary); font-weight: 700; cursor: pointer; padding: 0; margin-bottom: 16px; display: flex; align-items: center; font-size: 1rem; }
        .back-btn:hover { text-decoration: underline; opacity: 0.8; }

        .loader { text-align: center; padding: 40px; color: var(--sb-primary); opacity: 0.7; font-size: 1.1rem;}
        
    </style>
</head>
<body>

    <div id="app">
        <!-- HEADER -->
        <div id="mainHeader" class="widget-header">
            <div class="header-top">
                <div class="header-icon">3Q</div>
                <h1 class="header-title">Live Events</h1>
            </div>
            <div class="header-subtitle">Corporate Streaming & Townhalls</div>
            
            <div class="header-stats">
                <div class="stat-item">
                    <span id="statLive" class="stat-value">0</span>
                    <span class="stat-label">Live Now</span>
                </div>
                <div class="stat-item">
                    <span id="statUpcoming" class="stat-value">0</span>
                    <span class="stat-label">Upcoming</span>
                </div>
            </div>
            <div class="header-accent-line"></div>
        </div>

        <div class="content-container">
            <div id="loader" class="loader">Loading events...</div>

            <!-- List View -->
            <div id="listView" class="hidden">
                <div id="eventListContainer" class="event-list"></div>
                <div id="noEventsMessage" class="hidden" style="text-align:center; opacity: 0.6; padding: 40px;">No events currently scheduled.</div>
            </div>

            <!-- Detail View -->
            <div id="detailView" class="hidden detail-wrapper">
                <button class="back-btn" onclick="app.showList()">
                    ← Back to Overview
                </button>
                
                <!-- CUSTOM PLAYER MOCKUP -->
                <div class="custom-player-container">
                    <!-- Solar Panel Background -->
                    <div class="player-background" id="playerBg" style="background-image: url('https://images.unsplash.com/photo-1509391366360-2e959784a276?auto=format&fit=crop&w=1600&q=80');"></div>
                    <div class="player-gradient"></div>

                    <!-- Top Left Logo -->
                    <div class="player-logo-box">S</div>

                    <!-- Top Right Download Icon -->
                    <div class="player-download-icon">
                        <svg viewBox="0 0 24 24" fill="white" width="28" height="28">
                            <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                        </svg>
                    </div>

                    <!-- Bottom Text -->
                    <div class="player-text-overlay">
                        <span class="player-brand-name">SIEMENS</span>
                        <span class="player-sub-name">Energy System</span>
                    </div>

                    <!-- Controls Bar -->
                    <div class="player-controls">
                        <!-- Play -->
                        <button class="control-btn">
                            <svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                        </button>
                        
                        <!-- Volume -->
                        <button class="control-btn">
                            <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/></svg>
                        </button>

                        <!-- Progress -->
                        <div class="progress-track">
                            <div class="progress-fill"></div>
                        </div>

                        <!-- Time -->
                        <div class="time-display">13:15</div>

                        <!-- Settings & Fullscreen -->
                        <div class="right-controls">
                            <button class="control-btn" style="margin:0;">
                                <svg viewBox="0 0 24 24"><path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L5.04 8.87c-.11.21-.06.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.11-.22.06-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/></svg>
                            </button>
                            <button class="control-btn" style="margin:0;">
                                <svg viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Info Box -->
                <div class="detail-info">
                    <h2 id="detailTitle" class="detail-title"></h2>
                    <div id="detailDate" class="detail-meta"></div>
                    <p id="detailDesc" style="line-height: 1.6; font-size: 1.05rem;"></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const CONFIG = {
            apiEndpoint: 'https://your-backend-service.example.com/api/events',
            useMockData: true 
        };

        const MOCK_DATA = [
            {
                id: 1,
                title: "SIEMENS Energy System",
                date: new Date(new Date().getTime() - 1000 * 60 * 30).toISOString(),
                description: "Live demonstration of the new solar array efficiency protocols. Broadcasting from Munich Innovation Hub.",
                isLive: true, 
                imageUrl: "https://images.unsplash.com/photo-1509391366360-2e959784a276?auto=format&fit=crop&w=800&q=80",
                embedUrl: "" // Not used in this visual mockup mode
            },
            {
                id: 2,
                title: "Global Product Training",
                date: "2026-03-15T14:00:00.000Z",
                description: "Deep dive into Version 4.0 features. Mandatory for Sales & Marketing staff.",
                isLive: false,
                imageUrl: "https://images.unsplash.com/photo-1531403009284-440f080d1e12?auto=format&fit=crop&w=800&q=80",
                embedUrl: ""
            },
            {
                id: 3,
                title: "Cybersecurity Awareness",
                date: "2026-03-20T11:00:00.000Z",
                description: "Protecting our digital assets: A workshop on phishing and data protection.",
                isLive: false,
                imageUrl: "https://images.unsplash.com/photo-1614064641938-3bbee52942c7?auto=format&fit=crop&w=800&q=80",
                embedUrl: ""
            },
            {
                id: 4,
                title: "All-Hands: Asia Pacific",
                date: "2026-04-05T09:00:00.000Z",
                description: "Regional updates from Singapore and Tokyo offices.",
                isLive: false,
                imageUrl: "https://images.unsplash.com/photo-1497366216548-37526070297c?auto=format&fit=crop&w=800&q=80",
                embedUrl: ""
            },
            {
                id: 5,
                title: "AI in Manufacturing",
                date: "2026-04-12T10:00:00.000Z",
                description: "Exploring the impact of machine learning and autonomous systems on our production lines.",
                isLive: false,
                imageUrl: "https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?auto=format&fit=crop&w=800&q=80",
                embedUrl: ""
            },
            {
                id: 6,
                title: "Sustainability Goals 2030",
                date: "2026-04-22T09:00:00.000Z",
                description: "Our path to net zero carbon emissions. Keynote speech by the Chief Sustainability Officer.",
                isLive: false,
                imageUrl: "https://images.unsplash.com/photo-1473341304170-971dccb5ac1e?auto=format&fit=crop&w=800&q=80",
                embedUrl: ""
            }
        ];

        const app = {
            init: function() {
                this.loadEvents();
            },

            loadEvents: async function() {
                try {
                    let events = [];
                    if (CONFIG.useMockData) {
                        await new Promise(r => setTimeout(r, 600));
                        events = MOCK_DATA;
                    } else {
                        const response = await fetch(CONFIG.apiEndpoint);
                        if (!response.ok) throw new Error("Network error");
                        events = await response.json();
                    }
                    this.updateStats(events);
                    this.renderList(events);
                } catch (error) {
                    console.error("Load error:", error);
                    document.getElementById('loader').innerText = "Failed to load events.";
                }
            },

            updateStats: function(events) {
                const liveCount = events.filter(e => e.isLive).length;
                const upcomingCount = events.filter(e => !e.isLive).length;
                document.getElementById('statLive').innerText = liveCount;
                document.getElementById('statUpcoming').innerText = upcomingCount;
            },

            renderList: function(events) {
                const container = document.getElementById('eventListContainer');
                container.innerHTML = '';
                document.getElementById('loader').classList.add('hidden');
                
                if (events.length === 0) {
                    document.getElementById('noEventsMessage').classList.remove('hidden');
                    document.getElementById('listView').classList.remove('hidden');
                    return;
                }

                events.sort((a, b) => {
                    if (a.isLive && !b.isLive) return -1;
                    if (!a.isLive && b.isLive) return 1;
                    return new Date(a.date) - new Date(b.date);
                });

                events.forEach(event => {
                    const card = document.createElement('div');
                    card.className = `event-card`;
                    card.onclick = () => this.showDetail(event);

                    const dateStr = new Date(event.date).toLocaleDateString('en-US', {
                        month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute:'2-digit'
                    });

                    const bgStyle = `background-image: url('${event.imageUrl}');`;

                    let badgeHtml = '';
                    if (event.isLive) {
                        badgeHtml = `<span class="live-badge">● LIVE</span>`;
                    } else {
                        badgeHtml = `<span class="upcoming-badge">Upcoming</span>`;
                    }

                    card.innerHTML = `
                        <div class="card-thumbnail" style="${bgStyle}">
                            ${badgeHtml}
                        </div>
                        <div class="card-content">
                            <span class="event-date">${dateStr}</span>
                            <h4 class="event-title">${event.title}</h4>
                            <p class="event-desc">${event.description}</p>
                        </div>
                        <div class="card-footer">
                            <span class="open-btn">Open Stream</span>
                        </div>
                    `;
                    container.appendChild(card);
                });

                document.getElementById('listView').classList.remove('hidden');
            },

            showDetail: function(event) {
                document.getElementById('mainHeader').classList.add('hidden'); // Hide header on detail to match focus
                document.getElementById('listView').classList.add('hidden');
                document.getElementById('detailView').classList.remove('hidden');

                document.getElementById('detailTitle').innerText = event.title;
                document.getElementById('detailDesc').innerText = event.description;
                
                const dateStr = new Date(event.date).toLocaleDateString('en-US', {
                    weekday: 'long', month: 'long', day: 'numeric', year: 'numeric', 
                    hour: '2-digit', minute:'2-digit'
                });
                document.getElementById('detailDate').innerText = dateStr;

                // Update Background Image
                document.getElementById('playerBg').style.backgroundImage = `url('${event.imageUrl}')`;
                
                // Update specific player text overlay if needed, or keep generic for demo
                document.querySelector('.player-brand-name').innerText = event.title.split(' ')[0] || "SIEMENS";
                document.querySelector('.player-sub-name').innerText = event.title.substring(event.title.indexOf(' ')+1) || "Energy System";

                window.scrollTo(0,0);
            },

            showList: function() {
                document.getElementById('detailView').classList.add('hidden');
                document.getElementById('listView').classList.remove('hidden');
                document.getElementById('mainHeader').classList.remove('hidden');
            }
        };

        document.addEventListener('DOMContentLoaded', () => {
            app.init();
        });
    </script>
</body>
</html>
